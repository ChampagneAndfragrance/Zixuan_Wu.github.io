{{- $authors := .Params.authors -}}
{{- $notes := .Params.author_notes -}}

{{- range $i, $author := $authors -}}
  {{- if gt $i 0 }}, {{ end -}}

  {{- $note := "" -}}
  {{- if and $notes (lt $i (len $notes)) }}
    {{ $note = index $notes $i }}
  {{- end -}}

  {{- $author_page := site.GetPage (printf "authors/%s" $author) -}}

  <span class="author">
    {{- if $author_page }}
      <a href="{{ $author_page.RelPermalink }}">{{ $author_page.Title }}</a>{{ if $note }}<sup title="{{ $note }}">†</sup>{{ end }}
    {{- else }}
      {{ $author }}{{ if $note }}<sup title="{{ $note }}">†</sup>{{ end }}
    {{- end }}
  </span>
{{- end -}}

{{/* Footnote explanation block */}}
{{- if $notes }}
  {{- $unique_notes := slice | uniq ($notes | where "!=" "") }}
  {{- if gt (len $unique_notes) 0 }}
    <div class="author-notes" style="font-size: 0.85em; margin-top: 0.5em;">
      {{ range $unique_notes }}
        <div>† {{ . }}</div>
      {{ end }}
    </div>
  {{- end }}
{{- end }}
